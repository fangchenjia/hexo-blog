---
title: mysql多表查询
toc: true
mathjax: false
categories: mysql
keywords: mysql 内连接 外连接 全连接
tags:
  - mysql
abbrlink: d5bf874c
date: 2020-09-24 13:33:52
---
# 多表查询
## 1. 内连接查询：
组合两个表中的记录，返回关联字段相符的记录，也就是返回两个表的交集（阴影）部分。
<!--more-->
![](https://myblog-1303177382.cos.ap-chongqing.myqcloud.com/blogpostimg/inner_join.png)
在boy表和girl 表中查出两表 hid 字段一致的姓名（gname，bname），boy表和girl 表如下：
![](https://myblog-1303177382.cos.ap-chongqing.myqcloud.com/blogpostimg/内连接.png)
1. 隐式内连接：使用where条件消除无用数据
```
SELECT boy.hid,boy.bname,girl.gname FROM boy，girl 
where girl.hid = boy.hid;
```
2. 显式内连接：
```
SELECT boy.hid,boy.bname,girl.gname 
FROM boy INNER JOIN girl 
ON girl.hid = boy.hid;
```
查询结果如下：
![](https://myblog-1303177382.cos.ap-chongqing.myqcloud.com/blogpostimg/内连接查询.png)
## 2. 外链接查询：
### 1. 左外连接（left outer join，outer可省略）：
左表全部出现在结果集中，若右表无对应记录，则相应字段为NULL
![](https://myblog-1303177382.cos.ap-chongqing.myqcloud.com/blogpostimg/left_join.png)
语法：select 字段列表 from 表1 left [outer] join 表2 on 条件；

案例解释：在boy表和girl表中左连接查询，boy表和girl 表如下：
![](https://myblog-1303177382.cos.ap-chongqing.myqcloud.com/blogpostimg/内连接.png)
```
SELECT boy.hid,boy.bname,girl.gname FROM boy LEFT JOIN girl ON girl.hid = boy.hid;
```
查询结果：
![](https://myblog-1303177382.cos.ap-chongqing.myqcloud.com/blogpostimg/左连接查询.png)
### 2.右外连接（right outer join，outer可省略）
右表全部出现在结果集中，若左表无对应记录，则相应字段为NULL
![](https://myblog-1303177382.cos.ap-chongqing.myqcloud.com/blogpostimg/right_join.png)
```
SELECT boy.hid,boy.bname,girl.gname 
FROM boy RIGHT JOIN girl 
ON girl.hid = boy.hid;
```
查询结果：
![](https://myblog-1303177382.cos.ap-chongqing.myqcloud.com/blogpostimg/右连接查询.png)
### 3.全连接 union /union all
![](https://myblog-1303177382.cos.ap-chongqing.myqcloud.com/blogpostimg/full_join.png)
union语句注意事项：
```
 1.通过union连接的SQL它们分别单独取出的列数必须相同；
 2.不要求合并的表列名称相同时，以第一个sql 表列名为准；
 3.使用union 时，完全相等的行，将会被合并，由于合并比较耗时，一般不直接使用 union 进行合并，而是通常采用union all 进行合并；
 4.被union 连接的sql 子句，单个子句中不用写order by ，因为不会有排序的效果。但可以对最终的结果集进行排序；
(select id,name from A order by id) union all (select id,name from B order by id); //没有排序效果
(select id,name from A ) union all (select id,name from B ) order by id; //有排序效果
```
案例解释：将a表和b表合并，表结构如下：
![](https://myblog-1303177382.cos.ap-chongqing.myqcloud.com/blogpostimg/全连接.png)
采用 union 全连接：
![](https://myblog-1303177382.cos.ap-chongqing.myqcloud.com/blogpostimg/全连接查询.png)
union会自动将完全重复的数据去除掉，a、b表中"c"的值都为15，所以只显示一行。

采用 union all 全连接：
![](https://myblog-1303177382.cos.ap-chongqing.myqcloud.com/blogpostimg/全连接2.png)
union all会保留那些重复的数据；
*****
转载自https://blog.csdn.net/zjt980452483/article/details/82945663



